{"ast":null,"code":"import React,{useState,useEffect}from'react';import{API,MOVIES}from'../../constants/constants';import{Movie}from'../../components/Movie/Movie';import Button from'../../components/Button/Button';import{getData}from\"../../services/fetchdata\";import styles from'./Movies.module.css';import Description from'../../components/Description/Description';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const Movies=()=>{const[data,setData]=useState([]);const[max,setMax]=useState(6);const[showAd,setShowAd]=useState(false);function handleShowAd(){setShowAd(ad=>!ad);console.log('description ',showAd);}async function fetchData(){let res=await getData(API.MOVIES);setData(res.map(movie=>{return{...movie,liked:false,ad:false};}));}useEffect(()=>{fetchData();},[]);const[movies,setMovies]=useState([]);const[description,setDescription]=useState({});useEffect(()=>{setMovies(data.slice(0,max));},[data,movies]);useEffect(()=>{setDescription(data[0]);},[data]);function getMovies(){setMovies(data.slice(0,max));setMax(max+6);}function handleDescription(movie){if(description.movie!==movie.movie){let objIndex=movies.findIndex(obj=>obj.id===movie.id);console.log(movies[objIndex].ad);!movie.ad&&handleShowAd();movies[objIndex].ad=true;console.log(movies[objIndex].ad);setMovies(movies);}setDescription(movie);}function changeData(movie){let objIndex=movies.findIndex(obj=>obj.id===movie.id);if(movies[objIndex].liked){movies[objIndex].likes=parseInt(movies[objIndex].likes)-1;}else{movies[objIndex].likes=parseInt(movies[objIndex].likes)+1;}movies[objIndex].liked=!movies[objIndex].liked;setMovies(movies);}return/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.wrap,children:[/*#__PURE__*/_jsx(\"h2\",{className:styles.title,children:MOVIES.TITLE}),/*#__PURE__*/_jsx(\"div\",{className:styles.wrapper,children:movies&&movies.map(movie=>/*#__PURE__*/_jsx(Movie,{...movie,action:()=>handleDescription(movie),change:changeData},movie.id))}),/*#__PURE__*/_jsx(\"div\",{className:styles.btn,children:movies.length%6>0?\"\":/*#__PURE__*/_jsx(Button,{name:\"LOAD MORE\",action:getMovies})})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.left,children:/*#__PURE__*/_jsx(Description,{...description,change:changeData,showAd:showAd})})]});};","map":{"version":3,"names":["React","useState","useEffect","API","MOVIES","Movie","Button","getData","styles","Description","jsx","_jsx","jsxs","_jsxs","Movies","data","setData","max","setMax","showAd","setShowAd","handleShowAd","ad","console","log","fetchData","res","map","movie","liked","movies","setMovies","description","setDescription","slice","getMovies","handleDescription","objIndex","findIndex","obj","id","changeData","likes","parseInt","className","container","children","wrap","title","TITLE","wrapper","action","change","btn","length","name","left"],"sources":["C:/Users/PrabGun/Downloads/react-cineflex-app/react-cineflex-main/src/screens/Movies/Movies.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { API, MOVIES } from '../../constants/constants';\nimport { Movie } from '../../components/Movie/Movie';\nimport Button from '../../components/Button/Button';\nimport { getData } from \"../../services/fetchdata\";\nimport styles from './Movies.module.css'\nimport  Description  from '../../components/Description/Description';\n\nexport const Movies = () => {\n\n  const [data, setData] = useState([]);\n  const [max, setMax] = useState(6)\n  const [showAd, setShowAd] = useState(false)\n  function handleShowAd(){\n    setShowAd((ad) => !ad)\n    console.log('description ',showAd)\n  }\n    async function fetchData() {\n        let res = await getData(\n            API.MOVIES\n        );\n        setData(res.map((movie)=>{return {...movie,liked:false,ad:false}}));\n    }\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const [movies, setMovies] = useState([])\n  const [description, setDescription] = useState({})\n\n  useEffect(() => {\n    \n   setMovies(data.slice(0,max))\n  }, [data,movies]);\n\n  useEffect(() => {\n    setDescription(data[0])\n   }, [data]);\n\n  function getMovies() {\n    setMovies(data.slice(0,max))\n    setMax(max+6);\n  }\n  \n\n  function handleDescription(movie){\n    if(description.movie !== movie.movie)\n    {\n        let objIndex = movies.findIndex((obj => obj.id === movie.id));\n        console.log(movies[objIndex].ad)\n        !movie.ad && handleShowAd()\n        movies[objIndex].ad = true\n        console.log(movies[objIndex].ad)\n        setMovies(movies);\n    }\n    setDescription(movie)\n  }\n\n\n  function changeData(movie) {\n    let objIndex = movies.findIndex((obj => obj.id === movie.id));\n    if(movies[objIndex].liked) {\n        movies[objIndex].likes = parseInt(movies[objIndex].likes)-1\n    } else {\n        movies[objIndex].likes = parseInt(movies[objIndex].likes)+1\n    }\n    movies[objIndex].liked = !movies[objIndex].liked\n    setMovies(movies);\n  }\n\n  \n  return (\n    <div className={styles.container}>\n        <div className={styles.wrap}>\n            <h2 className={styles.title}>{MOVIES.TITLE}</h2>\n            <div className={styles.wrapper}>\n                {movies && movies.map((movie) => (<Movie key={movie.id} {...movie} action={()=>handleDescription(movie)} change={changeData}/>))}\n            </div>\n            <div className={styles.btn}>{movies.length%6>0?\"\":<Button name=\"LOAD MORE\" action={getMovies}/>}</div>\n        </div>\n        <div className={styles.left}>\n            <Description {...description} change={changeData} showAd={showAd}/>\n        </div>\n    </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}