{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{ADVERTISEMENT}from\"../../constants/constants\";import styles from\"./WithAd.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const withAd=(OrginalComponent,teaser)=>{function NewComponent(props){const[time,setTime]=useState(teaser?5:15);const[play,setPlay]=useState(teaser?false:true);const[ad,setAd]=useState(false);const[adShowed,setAdShowed]=useState(false);const[resumes,setResumes]=useState(teaser?2:5);const[adOver,setAdOver]=useState(false);function handlePlay(){if(!adOver){setPlay(play=>!play);}}function reset(){console.log('reset');setResumes(5);setTime(15);}useEffect(()=>{let timer;let resumesTimer;if(play){timer=setTimeout(()=>{setTime(time-1);},1000);}if(time===0&&play&&!ad){setPlay(play=>!play);setAd(ad=>!ad);setAdOver(adOver=>!adOver);clearTimeout(timer);}if(ad){resumesTimer=setTimeout(()=>{setResumes(resumes-1);},1000);}if(resumes===0&&ad&&!play&&!adShowed){setPlay(play=>!play);setAd(ad=>!ad);setAdShowed(adShowed=>!adShowed);clearTimeout(resumesTimer);}},[play,ad,time,resumes]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(OrginalComponent,{...props,action:handlePlay,advertisement:ad,adShowed:adShowed,adOver:adOver,reset:reset}),!adOver?play?/*#__PURE__*/_jsx(\"div\",{children:ADVERTISEMENT.AD+(teaser?'0'+time:time)}):/*#__PURE__*/_jsx(_Fragment,{}):/*#__PURE__*/_jsx(_Fragment,{}),adOver?ad?/*#__PURE__*/_jsx(\"div\",{children:ADVERTISEMENT.RESUME+resumes}):/*#__PURE__*/_jsx(_Fragment,{}):/*#__PURE__*/_jsx(_Fragment,{})]});}return NewComponent;};","map":{"version":3,"names":["React","useEffect","useState","ADVERTISEMENT","styles","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","withAd","OrginalComponent","teaser","NewComponent","props","time","setTime","play","setPlay","ad","setAd","adShowed","setAdShowed","resumes","setResumes","adOver","setAdOver","handlePlay","reset","console","log","timer","resumesTimer","setTimeout","clearTimeout","children","action","advertisement","AD","RESUME"],"sources":["C:/Users/PrabGun/Downloads/react-cineflex-app/react-cineflex-main/src/hoc/WithAd/withAd.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { ADVERTISEMENT } from \"../../constants/constants\";\nimport styles from \"./WithAd.module.css\";\n\nexport const withAd = (OrginalComponent, teaser) => {\n  function NewComponent(props) {\n\n    const [time, setTime] = useState(teaser ? 5 : 15);\n    const [play, setPlay] = useState(teaser?false:true);\n    const [ad, setAd] = useState(false);\n    const [adShowed, setAdShowed] = useState(false);\n\n    const [resumes, setResumes] = useState(teaser ? 2 : 5);\n    const [adOver, setAdOver] = useState(false);\n\n    function handlePlay() {\n        if(!adOver) {\n            setPlay((play) => !play);\n        }\n    }\n\n    function reset(){\n        console.log('reset')\n        setResumes(5)\n        setTime(15)\n    }\n\n    useEffect(() => {\n      let timer;\n      let resumesTimer;\n      if (play) {\n        timer = setTimeout(() => {\n          setTime(time - 1);\n        }, 1000);\n      }\n      if (time === 0 && play && !ad) {\n        setPlay((play) => !play);\n        setAd((ad) => !ad);\n        setAdOver((adOver) => !adOver);\n        clearTimeout(timer);\n      }\n      if (ad) {\n        resumesTimer = setTimeout(() => {\n          setResumes(resumes - 1);\n        }, 1000);\n      }\n      if (resumes === 0 && ad && !play && !adShowed) {\n        setPlay((play) => !play);\n        setAd((ad) => !ad);\n        setAdShowed((adShowed) => !adShowed);\n        clearTimeout(resumesTimer);\n      }\n    }, [play, ad, time, resumes]);\n\n    return (\n      <>\n        <OrginalComponent\n          {...props}\n          action={handlePlay}\n          advertisement={ad}\n          adShowed={adShowed}\n          adOver={adOver}\n          reset={reset}\n        />\n        {!adOver ? play ? <div>{ADVERTISEMENT.AD+(teaser?'0'+time:time)}</div> : <></> : <></>}\n        {adOver ? ad ? <div>{ADVERTISEMENT.RESUME+resumes}</div> : <></> : <></>}\n      </>\n    );\n  }\n\n  return NewComponent;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}